<!DOCTYPE html>
<canvas id="background-canvas"></canvas>
<html>
<head>
    <title>Portfolio - Shane Webster</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            background-repeat: no-repeat;
            background-position: top left;
            background-attachment: fixed;
        }

        h1 {
            font-family: Arial, sans-serif;
            color: #000000;
            margin: 0;
            padding: 0;
        }

        p {
            font-family: Georgia, serif;
            font-size: 14px;
            font-style: normal;
            font-weight: normal;
            color: #000000;
            margin: 0;
            padding: 0;
        }

        #background-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            width: 100%;
            height: 100%;
        }

        .content {
            position: relative;
            z-index: 2;
        }

        .toggle-btn {
            display: inline-block;
            background-color: #555;
            color: #fff;
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }
    </style>
</head>

<body>

    <div class="content">
        <button class="toggle-btn" onclick="toggleMode()">Toggle Mode</button>
        <h1>Text</h1>
        <p>Body Text</p>
    </div>

</body>

</html>

<script src="https://unpkg.com/trianglify@^4/dist/trianglify.bundle.js"></script>

<script>

    var canvas = document.getElementById("background-canvas");

    var intensity = 0.5;
    var intensityStep = 0.0005;
    var animationInterval = 5; // Animation frame duration in milliseconds

    // Generate the initial pattern seed
    var seed = String(Math.random());

    //console.log(seed);

    var pattern = null;

    const canvasOpts = {
        scaling: 'auto',
        applyCssScaling: true
    }

    //Color palettes
    const dark = ['#222253', '#28345A', '#36616C', '#222253'];
    const light = ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'];

    //Dark mode by default
    var colorPalette = dark;

    function toggleMode() {
        const body = document.querySelector('body');
        const toggleBtn = document.querySelector('.toggle-btn');

        if (colorPalette == dark) {
            //Change trianglify palette
            colorPalette = light;

            //Change button color
            body.style.color = '#333';
            toggleBtn.style.color = '#333';
        } else {
            //Change trianglify palette
            colorPalette = dark;

            //Change button color
            body.style.color = '#fff';
            toggleBtn.style.color = '#fff';
        }
    }

    function generatePattern(seed, colorPalette, intensity) {
        return trianglify({
            seed: seed,
            width: window.innerWidth,
            height: window.innerHeight,
            cellSize: 120,
            variance: 0.75,
            xColors: colorPalette,
            yColors: 'match',
            palette: trianglify.colorbrewer,
            colorFunction: trianglify.colorFunctions.interpolateLinear(intensity),
            strokeWidth: 0,
        })
    }

    function animate() {
        // Update the variance value
        intensity += intensityStep;

        // Clamp the variance within a certain range
        if (intensity <= 0.25 || intensity >= 1.0) {
            intensityStep *= -1;
        }

        pattern = generatePattern(seed, colorPalette, intensity);
        pattern.toCanvas(canvas, canvasOpts);


        // Call animate function again after the specified interval
        setTimeout(animate, animationInterval);
    }

    animate();

</script>